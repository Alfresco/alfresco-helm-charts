<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/alfresco-helm-charts/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/alfresco-helm-charts/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(3)) > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(3) > ul > li:nth-child(3) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(4) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; } </style> <script src="/alfresco-helm-charts/assets/js/vendor/lunr.min.js"></script> <script src="/alfresco-helm-charts/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Email features | Alfresco Helm Charts Documentation</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Email features" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="User documentation for the Alfresco component Helm Charts" /> <meta property="og:description" content="User documentation for the Alfresco component Helm Charts" /> <link rel="canonical" href="https://alfresco.github.io/alfresco-helm-charts/charts/alfresco-repository/docs/email.html" /> <meta property="og:url" content="https://alfresco.github.io/alfresco-helm-charts/charts/alfresco-repository/docs/email.html" /> <meta property="og:site_name" content="Alfresco Helm Charts Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Email features" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"User documentation for the Alfresco component Helm Charts","headline":"Email features","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://alfresco.github.io/alfresco-helm-charts/docs/images/hyland-alfresco-logos.png"}},"url":"https://alfresco.github.io/alfresco-helm-charts/charts/alfresco-repository/docs/email.html"}</script> <!-- End Jekyll SEO tag --> <style> @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap') </style> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/alfresco-helm-charts/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Alfresco Helm Charts Documentation"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/alfresco-helm-charts/index.html" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/docs/build-your-own-charts.html" class="nav-list-link">Build your own charts</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Charts Reference category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/alfresco-helm-charts/docs/reference.html" class="nav-list-link">Charts Reference</a><ul class="nav-list"><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/activemq/README.html" class="nav-list-link">activemq</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-activiti/README.html" class="nav-list-link">alfresco-activiti</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-activiti-admin/README.html" class="nav-list-link">alfresco-activiti-admin</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-adf-app/README.html" class="nav-list-link">alfresco-adf-app</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-ai-transformer/README.html" class="nav-list-link">alfresco-ai-transformer</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-audit-storage/README.html" class="nav-list-link">alfresco-audit-storage</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-common/README.html" class="nav-list-link">alfresco-common</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-connector-hxi/README.html" class="nav-list-link">alfresco-connector-hxi</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-connector-ms365/README.html" class="nav-list-link">alfresco-connector-ms365</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-connector-msteams/README.html" class="nav-list-link">alfresco-connector-msteams</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-search-service/charts/alfresco-insight-zeppelin/README.html" class="nav-list-link">alfresco-insight-zeppelin</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-repository/README.html" class="nav-list-link">alfresco-repository</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-search-enterprise/README.html" class="nav-list-link">alfresco-search-enterprise</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-search-service/README.html" class="nav-list-link">alfresco-search-service</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-share/README.html" class="nav-list-link">alfresco-share</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-sync-service/README.html" class="nav-list-link">alfresco-sync-service</a></li><li class="nav-list-item"><a href="/alfresco-helm-charts/charts/alfresco-transform-service/README.html" class="nav-list-link">alfresco-transform-service</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Guides category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/alfresco-helm-charts/docs/guides/" class="nav-list-link">Guides</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Alfresco Transform Service category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/alfresco-helm-charts/docs/guides/alfresco-transform-service.html" class="nav-list-link">Alfresco Transform Service</a><ul class="nav-list"><li class="nav-list-item"> <a href="/alfresco-helm-charts/charts/alfresco-transform-service/docs/autoscaling.html" class="nav-list-link">Autoscaling</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Process Services category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/alfresco-helm-charts/docs/guides/alfresco-process.html" class="nav-list-link">Process Services</a><ul class="nav-list"><li class="nav-list-item"> <a href="/alfresco-helm-charts/charts/alfresco-activiti/docs/databases-configuration.html" class="nav-list-link">Database configuration</a> </li><li class="nav-list-item"> <a href="/alfresco-helm-charts/charts/alfresco-activiti/docs/elasticsearch-configuration.html" class="nav-list-link">Index configuration</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Repository category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/alfresco-helm-charts/docs/guides/alfresco-repository.html" class="nav-list-link">Repository</a><ul class="nav-list"><li class="nav-list-item"> <a href="/alfresco-helm-charts/charts/alfresco-repository/docs/autoscaling.html" class="nav-list-link">Autoscaling</a> </li><li class="nav-list-item"> <a href="/alfresco-helm-charts/charts/alfresco-repository/docs/keystores.html" class="nav-list-link">Custom keystores</a> </li><li class="nav-list-item"> <a href="/alfresco-helm-charts/charts/alfresco-repository/docs/email.html" class="nav-list-link">Email features</a> </li><li class="nav-list-item"> <a href="/alfresco-helm-charts/charts/alfresco-repository/docs/enterprise-license.html" class="nav-list-link">Enterprise license</a> </li><li class="nav-list-item"> <a href="/alfresco-helm-charts/charts/alfresco-repository/docs/repository-properties.html" class="nav-list-link">Global properties</a> </li><li class="nav-list-item"> <a href="/alfresco-helm-charts/charts/alfresco-repository/docs/subsystems.html" class="nav-list-link">Subsystems</a> </li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Alfresco Helm Charts Documentation" aria-label="Search Alfresco Helm Charts Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://docs.alfresco.com/" class="site-button" target="_blank" rel="noopener noreferrer" > Docs </a> </li> <li class="aux-nav-list-item"> <a href="https://github.com/Alfresco/alfresco-helm-charts" class="site-button" target="_blank" rel="noopener noreferrer" > GitHub Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/alfresco-helm-charts/docs/guides/">Guides</a></li> <li class="breadcrumb-nav-list-item"><a href="/alfresco-helm-charts/docs/guides/alfresco-repository.html">Repository</a></li> <li class="breadcrumb-nav-list-item"><span>Email features</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="configuring-email-related-features"> <a href="#configuring-email-related-features" class="anchor-heading" aria-labelledby="configuring-email-related-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuring email related features </h1> <p>Alfresco repository can interact with users through emails in different ways. Below we describe how to enable and configure the 3 main email features Alfresco offers:</p> <ul> <li>Sending emails</li> <li>Accepting incoming email</li> <li>IMAP interface to the repository</li> </ul> <h2 id="sending-emails"> <a href="#sending-emails" class="anchor-heading" aria-labelledby="sending-emails"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Sending emails </h2> <p>To enable Alfresco to send emails, it needs to communicate with a mail relay that administrators must configure. This mail relay is considered an integral part of the required architecture, and administrators can configure it using standard Alfresco properties.</p> <p>There are 2 ways to pass properties to the repository:</p> <ul> <li>Using <code class="language-plaintext highlighter-rouge">configuration.repository.existingConfigMap</code></li> <li>Using <code class="language-plaintext highlighter-rouge">environment.CATALINA_OPTS</code> env var.</li> </ul> <h3 id="using-a-configmap"> <a href="#using-a-configmap" class="anchor-heading" aria-labelledby="using-a-configmap"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using a configmap </h3> <p>Passing properties through a configmap is as simple as setting it in the alfresco-global.properties file. Start by creating a file called <code class="language-plaintext highlighter-rouge">alfresco-global.properties</code> as a regular properties file:</p> <div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">mail.host</span><span class="p">=</span><span class="s">mysmtp.infra.local</span>
<span class="py">mail.port</span><span class="p">=</span><span class="s">587</span>
<span class="py">mail.username</span><span class="p">=</span><span class="s">alfresco</span>
<span class="py">mail.from.default</span><span class="p">=</span><span class="s">alfresco@domain.tld</span>
<span class="py">mail.smtp.auth</span><span class="p">=</span><span class="s">true</span>
<span class="py">mail.smtp.starttls.enable</span><span class="p">=</span><span class="s">true</span>
</code></pre></div></div> <blockquote> <p>Note: Although possible, we do not set the authentication password is not set in the configmap. Instead we will create a secret for it.</p> </blockquote> <p>We then create a configmap from the file with the mail properties (and possibly other properties):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create configmap repo-config <span class="se">\</span>
  <span class="nt">--from-file</span><span class="o">=</span>alfresco-global.properties
</code></pre></div></div> <h3 id="using-a-env-vars"> <a href="#using-a-env-vars" class="anchor-heading" aria-labelledby="using-a-env-vars"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using a env vars </h3> <p>Passing properties through the CATALINA_OPTS environment variable can be done as shown below:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">environment</span><span class="pi">:</span>
  <span class="na">CATALINA_OPTS</span><span class="pi">:</span> <span class="pi">&gt;-</span>
    <span class="s">-Dmail.host=mysmtp.infra.local</span>
    <span class="s">-Dmail.port=587</span>
    <span class="s">-Dmail.username=alfresco</span>
    <span class="s">-Dmail.from.default=alfresco@domain.tld</span>
    <span class="s">-Dmail.smtp.auth=true</span>
    <span class="s">-Dmail.smtp.starttls.enable=true</span>
</code></pre></div></div> <h3 id="passing-credentials"> <a href="#passing-credentials" class="anchor-heading" aria-labelledby="passing-credentials"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Passing credentials </h3> <p>Regardless of whether you choose to pass properties using a configmap or directly values, you should avoid passing credentials in the same way. To securely pass credentials we will create a secret so the Alfresco repository can authenticate to the mail relay:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create secret generic mail-secret <span class="se">\</span>
  <span class="nt">--from-literal</span> <span class="s2">"MAIL_PASSWORe=mysupersecret"</span>
</code></pre></div></div> <p>Now when installing the chart you can use the values below:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">configuration</span><span class="pi">:</span>
  <span class="na">repository</span><span class="pi">:</span>
    <span class="na">existingConfigMap</span><span class="pi">:</span> <span class="s">repo-config</span>
    <span class="na">existingSecrets</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">repository-secrets</span>
        <span class="na">key</span><span class="pi">:</span> <span class="s">license.lic</span>
        <span class="na">purpose</span><span class="pi">:</span> <span class="s">acs-license</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">mail-secret</span>
        <span class="na">key</span><span class="pi">:</span> <span class="s">MAIL_PASSWORD</span>
        <span class="na">purpose</span><span class="pi">:</span> <span class="s">property:mail.password</span>
</code></pre></div></div> <h3 id="enabling-tlsssl"> <a href="#enabling-tlsssl" class="anchor-heading" aria-labelledby="enabling-tlsssl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enabling TLS/SSL </h3> <p>If you need to negotiate TLS/SSL session with the mail relay and your mail relay uses a certificate thatâ€™s not from a known CA, you will need to import a truststore containing either the server certificate itself or its issuing CA.</p> <p>Checkout the <a href="/alfresco-helm-charts/charts/alfresco-repository/docs/keystores.html">keystore doc for more details</a> import a truststore or a keystore works the same way.</p> <h2 id="accepting-incoming-email"> <a href="#accepting-incoming-email" class="anchor-heading" aria-labelledby="accepting-incoming-email"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Accepting incoming email </h2> <p>Enabling Alfresco Inbound SMTP capabilities allow content to be fed into Alfresco repository using email and SMTP protocol. It is HIGHLY recommended to not expose Alfresco SMTP server directly to the outside world and instead have an SMTP proxy to implement required security measures.</p> <div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">configuration</span><span class="p">:</span>
  <span class="py">smtp</span><span class="p">:</span>
    <span class="py">enabled</span><span class="p">:</span> <span class="s">true</span>
    <span class="py">port</span><span class="p">:</span> <span class="s">1465</span>
    <span class="py">service</span><span class="p">:</span>
      <span class="py">annotations</span><span class="p">:</span>
        <span class="err">service.beta.kubernetes.io/</span><span class="py">load-balancer-source-ranges</span><span class="p">:</span> <span class="s">10.0.0.0/24</span>
        <span class="err">service.beta.kubernetes.io/</span><span class="py">aws-load-balancer-nlb-target-type</span><span class="p">:</span> <span class="s">instance</span>
        <span class="err">service.beta.kubernetes.io/</span><span class="py">aws-load-balancer-backend-protocol</span><span class="p">:</span> <span class="s">tcp</span>
        <span class="err">service.beta.kubernetes.io/</span><span class="py">aws-load-balancer-subnets</span><span class="p">:</span> <span class="s">subnet-xxxx, subnet-yyyy</span>
        <span class="err">service.beta.kubernetes.io/</span><span class="py">aws-load-balancer-ssl-cert</span><span class="p">=</span><span class="s">arn:aws:acm:region:account:certificate/certificate_ID</span>
<span class="py">environment</span><span class="p">:</span>
  <span class="py">CATALINA_OPTS</span><span class="p">:</span> <span class="s">&gt;-</span>
    <span class="py">-Demail.inbound.unknownUser</span><span class="p">=</span><span class="s">anonymous</span>
    <span class="py">-Demail.server.domain</span><span class="p">=</span><span class="s">myecm.domain.tld</span>
    <span class="py">-Demail.server.allowed.senders</span><span class="p">=</span><span class="s">ecm-ingestor@myecm.domain.tld</span>
    <span class="py">-Demail.server.blocked.senders</span><span class="p">=</span><span class="s">.*</span>
    <span class="py">-Demail.server.auth.enabled</span><span class="p">=</span><span class="s">true</span>
</code></pre></div></div> <p>Here we configure an SMTPs service to listen on port 1465 through an AWS loadbalancer and accept emails from a single sender. This loadbalancer will be responsible for doing the SSL off-load and further traffic will be cleartext. This is suitable in most cases as - as said earlier - your SMTP server should never be exposed directly on internet and have an SMTP proxy in front of it.</p> <p>In case you really need to terminate the SSL session on the Alfresco repo see the <a href="/alfresco-helm-charts/charts/alfresco-repository/docs/keystores.html">keystore doc</a></p> <h2 id="enabling-imap"> <a href="#enabling-imap" class="anchor-heading" aria-labelledby="enabling-imap"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enabling IMAP </h2> <p>Similarly to SMTP inbound, it is possible to enable IMAP interface to the repository using the configuration below:</p> <p>To get broader view on the available properties to configure IMAP please refer to the <a href="https://docs.alfresco.com/content-services/latest/config/email/#configure-imap">IMAP documentation</a></p> <div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">configuration</span><span class="p">:</span>
  <span class="py">imap</span><span class="p">:</span>
    <span class="py">enabled</span><span class="p">:</span> <span class="s">true</span>
    <span class="py">port</span><span class="p">:</span> <span class="s">1145</span>
    <span class="py">service</span><span class="p">:</span>
      <span class="py">annotations</span><span class="p">:</span>
        <span class="err">service.beta.kubernetes.io/</span><span class="py">load-balancer-source-ranges</span><span class="p">:</span> <span class="s">10.0.0.0/24</span>
        <span class="err">service.beta.kubernetes.io/</span><span class="py">aws-load-balancer-nlb-target-type</span><span class="p">:</span> <span class="s">instance</span>
        <span class="err">service.beta.kubernetes.io/</span><span class="py">aws-load-balancer-backend-protocol</span><span class="p">:</span> <span class="s">tcp</span>
<span class="py">environment</span><span class="p">:</span>
  <span class="py">CATALINA_OPTS</span><span class="p">:</span> <span class="s">&gt;-</span>
    <span class="py">-Dimap.server.attachments.extraction.enabled</span><span class="p">=</span><span class="s">false</span>
</code></pre></div></div> <p>As usual, in order to configure IMAPs or IMAP/TLS refer to the <a href="/alfresco-helm-charts/charts/alfresco-repository/docs/keystores.html">keystore</a> documentation.</p> </main> <hr> <footer> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/Alfresco/alfresco-helm-charts/edit/main/./charts/alfresco-repository/docs/email.md" id="edit-this-page">Improve this page on GitHub</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
