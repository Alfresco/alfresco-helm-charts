suite: test ai-transformer configmap
templates:
- config-message-broker.yaml
- config-ai-transformer.yaml
- config-aws.yaml
tests:
- it: should render default configmaps based on values
  values: &testvalues
    - values/test_values.yaml
  template: config-aws.yaml
  asserts:
    - equal:
        path: data.JAVA_OPTS
        value: -XX:MinRAMPercentage=50 -XX:MaxRAMPercentage=80
      template: config-ai-transformer.yaml
    - equal:
        path: data.BROKER_URL
        value: failover:(nio://activemq:61616)
      template: config-message-broker.yaml
    - equal:
        path: data.AWS_REGION
        value: null
    - equal:
        path: data.AWS_S3_BUCKET
        value: null
    - equal:
        path: data.AWS_COMPREHEND_ROLE_ARN
        value: null
- it: should not render components configmaps
  values: *testvalues
  set:
    aws:
      existingConfigMap:
        name: myaws
  template: config-aws.yaml
  asserts:
    - hasDocuments:
       count: 0
