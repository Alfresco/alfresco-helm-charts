{{- if not .Values.messageBroker.existingConfigMap.name }}
apiVersion: v1
kind: ConfigMap
metadata:
  {{- $mqCtx := dict "Values" (dict "nameOverride" "ai-mq") "Chart" .Chart "Release" .Release }}
  name: {{ template "alfresco-ai-transformer.fullname" $mqCtx }}
  labels:
    {{- include "alfresco-ai-transformer.labels" $ | nindent 4 }}
data:
  {{- $reqmsg := "Please provide a valid broker URL with messageBroker.url or as a configmap key using messageBroker.existingConfigMap" }}
  {{ template "alfresco-common.activemq.cm" (required $reqmsg .Values.messageBroker.url) }}
{{- end }}
